\documentclass[aspectratio=169]{beamer}

\title[Short Title]{
    ECE 555 Group Presentation
}
\author{
	% \tiny
	Igor Semyonov
	\and Jordan Carnes
	\and Robert Laverne Griffin
}
\institute{
    George Macon University, Department of Electrical and Computer Engineering
}

\input{preamble.tex}

\begin{document}

\begin{frame}
	\vspace{-1.8cm}
	\titlepage
\end{frame}

\begin{frame}
	\frametitle{Why not Just Use C?}
	\framesubtitle{}

	It should not be used for production.

	See \url{https://veresov.pro/cmustdie/}
\end{frame}

\begin{frame}
	\frametitle{Why Rust?}
	\framesubtitle{Type System}

	insert real/fake cat example from \url{https://www.youtube.com/watch?v=z-0-bbc80JM&t=514s}
\end{frame}

\begin{frame}
	\frametitle{Why Rust?}
	\framesubtitle{Safety}

	Insert image of my IDE showing an error such as attempting to use a value after it is moved out of scope.
\end{frame}

\begin{frame}
	\frametitle{Why Rust?}
	\framesubtitle{Ergonomics while remaining fast}

	Here I may include my rust implementation of project 1 and compare it to my C version in both ergonomics, safety, and speed.
\end{frame}

\begin{frame}
	\frametitle{Why Rust?}
	\framesubtitle{Single threaded bsort}
	\begin{columns}
		\begin{column}{ 0.5\textwidth }
			\lstinputlisting[
				linerange=6-7,
				caption=Single threaded bsort,
				frame=tblr,
				language=Rust
			]{./code-snippets-rs/src/project-1-example.rs}
		\end{column}
		\begin{column}{ 0.4\textwidth }
			\begin{itemize}
				\item \Verb|a| is a vector of numbers
				\item \Verb|chunks\_mut| slices the vector into non-overlapping slices of the given length
				\item \Verb|for\_each| iterates over the chunks, running the provided function with each chunk as the input.
			\end{itemize}
		\end{column}
	\end{columns}
\end{frame}

\begin{frame}
	\frametitle{Why Rust?}
	\framesubtitle{Concurrency is easy while avoiding race conditions}
	\begin{columns}
		\begin{column}{ 0.5\textwidth }
			\lstinputlisting[
				linerange=2-4,
				caption=Example of easy parallelization,
				frame=tblr,
				language=Rust
			]{./code-snippets-rs/src/project-1-example.rs}
		\end{column}
		\begin{column}{ 0.4\textwidth }
			\begin{itemize}
				\item Chunks is known to split a vector into distinct slices
				\item Hence we can safely send each chunk to a different thread
			\end{itemize}
		\end{column}
	\end{columns}
\end{frame}

\begin{frame}
	\frametitle{Rust Ownership and Borrowing}
	\framesubtitle{Problems with shared memory access in Rust}

	\begin{columns}
		\begin{column}{0.5\textwidth}
			\begin{itemize}
				\item Ownership Rules\cite[Ch04-01]{rust-book}
				      \begin{itemize}
					      \item Each value has an owner
					      \item There can only be one owner at a time
					      \item When the owner goes out of scope, the value will be dropped.
				      \end{itemize}
			\end{itemize}
		\end{column}
		\begin{column}{0.5\textwidth}
			\begin{itemize}
				\item Borrow Rules\cite[Ch04-02]{rust-book}
				      \begin{itemize}
					      \item At any given time, you can have either one mutable reference or any number of immutable references.
					      \item References must always be valid.
				      \end{itemize}
			\end{itemize}
		\end{column}
	\end{columns}

	\vspace{1cm}
	C, and especially CUDA, style shared mutable memory access violates the ownership and borrow rules.

	At this time, we therefore need to use unsafe Rust when writing and calling GPU kernels.
\end{frame}

\begin{frame}
	\frametitle{Rust and CUDA}
	\framesubtitle{Current options}

	\begin{outline}[itemize]
		\1 Rust GPU
		\1 Rust CUDA
	\end{outline}

	Maybe mention other options for GPU programming in rust, like any rust support for ROCm, HIP, intel gaudi, or other.
\end{frame}

\begin{frame}
	\frametitle{Rust and CUDA}
	\framesubtitle{Description of how the Rust-CUDA crate works}
\end{frame}

\begin{frame}
	\frametitle{Rust and CUDA}
	\framesubtitle{Focusing on Rust CUDA}

	Currently being rebooted and is in active development.

	Uses nvidia's nvvm tool which is built on LLVM 7.
\end{frame}

\begin{frame}
	\frametitle{What is a compiler?}
	\framesubtitle{}

	Description of problems when going straing from source code to machine code.
\end{frame}

\begin{frame}
	\frametitle{The problem LLVM solves}
	\framesubtitle{}

	Description of LLVM and it's intermediate representation and how this has enabled much easier language development.
\end{frame}

\begin{frame}
	\frametitle{NVVM}
	\framesubtitle{}

	How NVVM works
\end{frame}

\begin{frame}
	\frametitle{Rust CUDA and NVVM}
	\framesubtitle{}

	How NVVM is used in Rust CUDA
\end{frame}

\begin{frame}
	\frametitle{Fractals}
	\framesubtitle{Mandelbrot and Burning Ship}
	$c \in \mathbb{C}$ is in the mandelbrot set if the sequence $\{z_n\}$ converges.

	\begin{equation*}
		z_{n+1} := z_n^2 + c \hspace{1cm} z_0 = 0
	\end{equation*}

	The Burning Ship fractal is defined similarly but the sequence is

	\begin{equation*}
		z_{n+1} := (\abs{\re(z_n)} + \abs{\im(z_n)}i)^2 + c \hspace{1cm} z_0 = 0
	\end{equation*}
\end{frame}

\begin{frame}
	\frametitle{Mandelbrot Kernel}
	% \framesubtitle{Mandelbrot and Burning Ship}
	\begin{columns}
		\begin{column}{0.5\textwidth}
			\lstinputlisting[
				linerange=48-70,
				basicstyle=\tiny,
				% caption=,
				frame=tblr,
				language=Rust
			]{../code/gpu/fractals/src/lib.rs}
		\end{column}
		\begin{column}{0.45\textwidth}
			\lstinputlisting[
				linerange=72-89,
                firstnumber=24,
				basicstyle=\tiny,
				% caption=,
				frame=tblr,
				language=Rust
			]{../code/gpu/fractals/src/lib.rs}
		\end{column}
	\end{columns}
\end{frame}

\begin{frame}
	\frametitle{Launching the Kernel}
	% \framesubtitle{Mandelbrot and Burning Ship}
	\begin{columns}
		\begin{column}{0.55\textwidth}
			\lstinputlisting[
				linerange=205-220,
				basicstyle=\tiny,
				% caption=,
				frame=tblr,
				language=Rust
			]{../code/cpu/fractals/src/main.rs}
		\end{column}
		\begin{column}{0.3\textwidth}
            \begin{itemize}
                \item Fiarly similar to launching a kernel in C.
                \item Must be used inside an \Verb|unsafe| block since the kernel itself is an unsafe function.
            \end{itemize}
		\end{column}
	\end{columns}
\end{frame}

\begin{frame}
	\frametitle{Output Image}
    \begin{figure}[H]
        \centering
        \includegraphics[width=\textwidth]{./figures/mandelbrot.png}
    \end{figure}
\end{frame}

\begin{frame}
	\frametitle{Fractals}
	\framesubtitle{Timing Results for 1 frame on CPU and GPU}

	I will add the single, frame timing results here
\end{frame}

\begin{frame}
	\frametitle{Fractals}
	\framesubtitle{Live Demo}

	I plan to be sharing my screen for the presentation and will switch to a live demo here.
\end{frame}

\begin{frame}
	\frametitle{This is a slide}
	\framesubtitle{With a subtitle}

	\begin{columns}
		\begin{column}{0.6\textwidth}
			This is some text in a column. Could be a figure instead.
		\end{column}
		\begin{column}{0.4\textwidth}
			\begin{outline}[itemize]
				\1
				This is a list
				\1
				It is an itemized one
				\1
				Hence the bullets
			\end{outline}
		\end{column}
	\end{columns}
\end{frame}

% \begin{frame}%[t, allowframebreaks]
%     \frametitle{
%         References
%     }
%     % \nocite{thing-we-want-listed-even-though-it-was-never-cited}
%     % \bibliographystyle{amsalpha}
%     \bibliographystyle{apalike}
%     % If you have more than one page of references, you want to tell beamer
%     % to put the continuation section label from the second slide onwards
%     \setbeamertemplate{frametitle continuation}[from second]
%     % and kill the abominable icon
%     \setbeamertemplate{bibliography item}{\Huge$\rightharpoonup$}
%     % \bibliographystyle{siam}
% \end{frame}
\bibliographystyle{ieeetr}
\bibliography{./refs}

\end{document}
